/*! carebot-tracker - v0.5.0 - 2016-03-21 */
!function(a){"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&module.exports?module.exports=a():window.CarebotTracker=a.call(this)}(function(){var a={};return a.Timer=function(a){function b(a){var b,c;if(60>a){var d=10*Math.floor(a/10);c=d.toString()+"s"}else if(a>=60&&300>a)b=Math.floor(a/60),c=b.toString()+"m";else{b=Math.floor(a/60);var e=5*Math.floor(b/5);c=e.toString()+"m"}return c}function c(a){if(!a)return 0;var b=new Date,c=Math.abs(b-a),d=Math.floor(c/1e3);return d}function d(a){var d=c(a)+m,e=b(d);return{bucket:e,seconds:d}}function e(){return d(i)}function f(){var b=d(i);if(b.bucket!==j){if(b.seconds>=l)return;a(b),j=b.bucket}}function g(){i=new Date,f(),a&&(k=setInterval(f,1e4))}function h(){m=c(i)+m,clearInterval(k),i=void 0}var i,j,k,l=1201,m=0;return{start:g,pause:h,check:e}}.bind(this),a.VisibilityTracker=function(b,c,d){function e(a){var b=a.getBoundingClientRect(),c=window.innerWidth||document.documentElement.clientWidth,d=window.innerHeight||document.documentElement.clientHeight,e=b.left<0,f=b.right>c,g=b.bottom>d,h=b.top<0;return e||f||h||g?!1:!0}function f(){var a=e(j);return k&&!a&&l.pause(),!k&&a&&l.start(),k=a,a}function g(){h&&window.clearTimeout(h),h=window.setTimeout(f,i)}var h,i=50,j=document.getElementById(b),k=!1,l=new a.Timer(c);d=d||{},window.addEventListener?(addEventListener("DOMContentLoaded",g,!1),addEventListener("load",g,!1),addEventListener("scroll",g,!1),addEventListener("resize",g,!1)):window.attachEvent&&(attachEvent("onDOMContentLoaded",g),attachEvent("onload",g),attachEvent("onscroll",g),attachEvent("onresize",g)),f()},a.ScrollTracker=function(a,b,c){function d(){var a,b,c=document.body,d=document.documentElement;return window.hasOwnProperty("pageYOffset")?(a=window.pageYOffset,b=window.pageXOffset):d.hasOwnProperty("scrollTop")?(a=d.scrollTop,b=d.scrollLeft):(a=c.scrollTop,b=c.scrollLeft),{scrollTop:a,scrollLeft:b}}function e(a){var b=a.getBoundingClientRect(),c=document.body,e=document.documentElement,f=d(),g=f.scrollTop,h=f.scrollLeft;window.hasOwnProperty("pageYOffset")?(g=window.pageYOffset,h=window.pageXOffset):e.hasOwnProperty("scrollTop")?(g=e.scrollTop,h=e.scrollLeft):(g=c.scrollTop,h=c.scrollLeft);var i=e.clientTop||c.clientTop||0,j=e.clientLeft||c.clientLeft||0,k=b.top+g-i,l=b.left+h-j;return{top:Math.round(k),left:Math.round(l)}}function f(){var a=e(j).top,b=j.offsetHeight,c=d().scrollTop,f=c+window.innerHeight,g=(f-a)/b;return g}function g(a){return 10*Math.round(10*a)}function h(){var a=f(),c=g(a);c>l&&(l=c,b(c))}var i=100,j=document.getElementById(a);if(j){var k,l=0;window.addEventListener("scroll",function(a){k&&window.clearTimeout(k),k=window.setTimeout(h,i)})}},a});
